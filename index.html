<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">

	<title>Tiny editable jQuery Bootstrap spreadsheet based on MindMup's</title>
	
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="keywords" content="opensource jquery bootstrap editable table spreadsheet" />
    <meta name="description" content="This tiny jQuery bootstrap plugin turns any table into an editable spreadsheet" />
    <link href="external/google-code-prettify/prettify.css" rel="stylesheet">
    <link href="http://maxcdn.bootstrapcdn.com/twitter-bootstrap/3.3.1/css/bootstrap.min.css" rel="stylesheet">
		<link href="http://maxcdn.bootstrapcdn.com/font-awesome/3.0.2/css/font-awesome.css" rel="stylesheet">
    <link href="external/bootstrap-datepicker-master/css/datepicker3.css"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.0/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>
    <script src="external/google-code-prettify/prettify.js"></script>
		<link href="index.css" rel="stylesheet">
    <script src="mindmup-editabletable.js"></script>
    <script src="numeric-input-example.js"></script>
    <script src="external/bootstrap-datepicker-master/js/bootstrap-datepicker.js"></script>
    <script src="external/adamwdraper/numeral.min.js"></script>
    <script>
      var locations = {
        'Adelaide': 'Adelaide - South Australia',
        'Brisbane': 'Brisbane - Queensland',
        'Canberra': 'Canberra - Australian Capital Territory',
        'Darwin': 'Darwin - Northern Territory',
        'Hobart': 'Hobart - Tasmania',
        'Melbourne': 'Melbourne - Victoria',
        'Perth': 'Perth - Western Australia',
        'Sydney': 'Sydney - New South Wales'
      };
    </script>
  </head>
  <body>
<div class="container">
  <div class="hero-unit">
  <div class="pull-right">
  </div>
	<h1>editableTableWidget extension<br/> <small>tiny editable jQuery Bootstrap spreadsheet</small></h1>
	<hr/>
    <table id="secondDemo" class="table table-striped">
      <thead><tr>
        <th>Location</th>
        <th>Expires</th>
        <th>Count</th>
        <th>Value</th>
      </tr></thead>
      <tbody>
        <tr>
          <td data-edit-type="select" data-edit-source="locations">Adelaide</td>
          <td data-edit-type="date">24-Jan-2015</td>
          <td data-edit-type="ntext">8</td>
          <td data-edit-type="vtext">5,000</td>
        </tr>
        <tr>
          <td data-edit-type="select" data-edit-source="locations">Brisbane</td>
          <td data-edit-type="date">25-Jan-2015</td>
          <td data-edit-type="ntext">8</td>
          <td data-edit-type="vtext">15,000</td>
        </tr>
        <tr>
          <td data-edit-type="select" data-edit-source="locations">Melbourne</td>
          <td data-edit-type="date">26-Jan-2015</td>
          <td data-edit-type="ntext">9</td>
          <td data-edit-type="vtext">8,000</td>
        </tr>
        <tr>
          <td data-edit-type="select" data-edit-source="locations">Sydney</td>
          <td data-edit-type="date">27-Jan-2015</td>
          <td data-edit-type="ntext">6</td>
          <td data-edit-type="vtext">9,000</td>
        </tr>
      </tbody>
    </table>
    <h2><small>just start typing to edit, or move around with arrow keys or mouse clicks!</small></h2>

</div>
<div class="row">
    <div class="col-md-12">
          <h2>About</h2>
          <p>
		  This <a href="https://github.com/oti169/editable-table/blob/master/mindmup-editabletable.js">tiny (5.6KB, 200 lines, 3.2KB minified) jQuery plugin</a> turns any 
		  table into an editable spreadsheet. It is forked from the <a href="https://github.com/mindmup/editable-table">original mindmup version</a> and expanded
      to include allow date, select and formatted number editing. Any errors introduced thereby are mine, not
      mindmup's.
          Here are the key features:
      </p>
          <ul>
            <li>No magic - works on a normal HTML table (so you can plug it in into any web table, and apply any JS function to calculate values)</li>
            <li>Supports validation and change events (so you can warn about invalid input or prevent invalid changes)</li>
            <li>Uses standard DOM focus for selection (so does not interrupt scrolling or tabbing outside the table)</a></li>
			<li>Input automatically copies underlying table cell styling</li>
            <li>Native copy/paste support</li>
            <li>Does not force any styling (so you can style it any way you want, using normal CSS)</li>
			<li>Works well with Bootstrap</li>
      <li>Depends on<ul>
        <li><a href="http://jquery.com/">jQuery</a></li>
        <li><a href="https://github.com/adamwdraper/Numeral-js">Numeral</a></li>
        <li><a href="https://github.com/eternicode/bootstrap-datepicker">bootstrap-datepicker</a></li>
      </ul></li>
      </ul>


      <h2>Usage</h2>
        <h3>HTML</h3>
        <p>When you're constructing the table, tag the &lt;td&gt; elements with a "data-edit-type"
        attribute. Valid values are "date", "select", "ttext", "ntext" and "vtext".</p>
        <table class="table"><thead><tr>
            <th style="min-width:150px">data-edit-type</th>
            <th>Description</th>
          </tr></thead>
          <tbody><tr>
            <td>date</td>
            <td>This field uses the bootstrap-datepicker, allowing the user to select a date from the
              datepicker pop-up.</td>
          </tr><tr>
            <td>select</td>
            <td>This one is a bit more tricky. You need to provide a data-edit-source whose value will
              be used to find a global variable, that it assumes is an associative array. For instance,
              the one used in this demonstration looks like this:
              <pre>
var locations = {
  'Adelaide': 'Adelaide - South Australia',
  'Brisbane': 'Brisbane - Queensland',
  'Canberra': 'Canberra - Australian Capital Territory',
  'Darwin': 'Darwin - Northern Territory',
  'Hobart': 'Hobart - Tasmania',
  'Melbourne': 'Melbourne - Victoria',
  'Perth': 'Perth - Western Australia',
  'Sydney': 'Sydney - New South Wales'
};</pre>
              In this demo, the first element looks like this: &lt;td data-edit-type="select" data-edit-source="locations"&gt;Adelaide&lt;/td&gt;.
              The key is displayed in the table, while the value is displayed in the dropdown.
            </td>
          </tr><tr>
            <td>ttext</td>
            <td>This is a regular text field.</td>
          </tr><tr>
            <td>ntext</td>
            <td>This is a numeric text field, using &lt;input type="number"&gt;.</td>
          </tr><tr>
            <td>vtext</td>
            <td>This is a value text field, designed specifically for my application. It
              allows the user to edit a numeric string, parsing and redisplaying with
              a comma as the thousands separator. It only deals with whole numbers, and
              the user can enter a value with or without commas.</td>
          </tr></tbody>
        </table>
<pre class="prettyprint">
  &lt;table id="secondDemo" class="table table-striped"&gt;
    &lt;thead&gt;&lt;tr&gt;
      &lt;th&gt;Location&lt;/th&gt;
      &lt;th&gt;Expires&lt;/th&gt;
      &lt;th&gt;Value&lt;/th&gt;
    &lt;/tr&gt;&lt;/thead&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td data-edit-type="select" data-edit-source="locations"&gt;Adelaide&lt;/td&gt;
        &lt;td data-edit-type="date"&gt;24-Jan-2015&lt;/td&gt;
        &lt;td data-edit-type="vtext" class="text-right"&gt;5,000&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td data-edit-type="select" data-edit-source="locations"&gt;Brisbane&lt;/td&gt;
        &lt;td data-edit-type="date"&gt;25-Jan-2015&lt;/td&gt;
        &lt;td data-edit-type="vtext" class="text-right"&gt;15,000&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td data-edit-type="select" data-edit-source="locations"&gt;Melbourne&lt;/td&gt;
        &lt;td data-edit-type="date"&gt;26-Jan-2015&lt;/td&gt;
        &lt;td data-edit-type="vtext" class="text-right"&gt;8,000&lt;/td&gt;
      &lt;/tr&gt;
      &lt;tr&gt;
        &lt;td data-edit-type="select" data-edit-source="locations"&gt;Sydney&lt;/td&gt;
        &lt;td data-edit-type="date"&gt;27-Jan-2015&lt;/td&gt;
        &lt;td data-edit-type="vtext" class="text-right"&gt;9,000&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
</pre>

        <h3>Javascript</h3>
<pre class="prettyprint ">
$('#table').editableTableWidget();
</pre>
<p>Make sure that the editor clones some specific CSS properties of the underlying cell</p>
<pre class="prettyprint ">
$('#table').editableTableWidget({
	cloneProperties: ['background', 'border', 'outline']
});
</pre>
<p>Mark content as invalid during editing (for example, change one of the item names above to blank or try to enter a non-numeric cost)</p>
<pre class="prettyprint">
$('table td').on('validate', function(evt, newValue) {
	if (....) { 
		return false; // mark cell as invalid 
	}
});
</pre>
<p>Act on a change (or even reject it).</p>
<pre class="prettyprint">
$('table td').on('change', function(evt, newValue) {
	// do something with the new cell value 
	if (....) { 
		return false; // reject change
	}
});
</pre>
    </div>
	</div>
	<div class="row">
		<div class="col-md-12">
			 <p style="text-align:center;">
				<a class="btn btn-large btn-primary jumbo" href="https://github.com/oti169/editable-table">View project on Github</a>
        </p>
		</div>
	</div>
</div>

<script>
  $('#secondDemo').editableTableWidget().find('td:first').focus();
  window.prettyPrint && prettyPrint();
</script>
<a href="https://github.com/oti169/editable-table"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
      
  </body>
</html>
